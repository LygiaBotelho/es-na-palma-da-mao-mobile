<ion-view title="Notícias">
	<spinner ng-if="uiState.loading && vm.pagination.pageNumber === 1 && !vm.isRefreshing"></spinner>

	<!--<div style="position:absolute; top:44px;right:0;width:170px;height:70px;z-index:9999;background-color: #fff;border: 1px solid #333;">
	<div> has more items:{{vm.hasMoreNews}}</div>
	<div> isRefreshing:{{vm.isRefreshing}}</div>
	<div> scroll habilitado: {{!vm.isRefreshing && vm.hasMoreNews}}</div>
</div>-->
	<ion-content id="state-news-list" delegate-handle="mainScroll" overflow-scroll="true">
		<ion-refresher on-refresh="vm.doRefresh()">
		</ion-refresher>
		<md-toolbar class="md-hue-1 md-whiteframe-1dp">
			<div class="md-toolbar-tools">
				<md-button class="md-accent md-raised" ng-click="::vm.openOriginsFilter($event)">
					Fontes
				</md-button>
				<md-button class="md-accent md-raised" ng-click="::vm.openDateFilter($event)">
					Data
				</md-button>
			</div>
		</md-toolbar>

		<md-list>
			<md-list-item  ng-click="::vm.goToNews(news.id)" item-width="100%" collection-repeat="news in vm.news track by news.id">
				<md-card-title-text>
					<span class="md-title lista-noticias">{{news.title}}</span>
					<div>
						<span md-colors="::{color: 'accent'}">
									{{news.origin}}
								</span>
						<span class="noticia-info-origem">
									 {{news.date | fromNow }}
								</span>
					</div>
				</md-card-title-text>
				<md-card-title-media>
					<div class="md-media-md card-media">
						<img alt="" ng-src="{{::news.image}}" onerror="this.style.display='none'" />
					</div>
				</md-card-title-media>
				<md-divider></md-divider>
			</md-list-item>
		</md-list>
		<message ng-if="!uiState.error && vm.news && !vm.news.length" text="Nenhuma notícia encontrada">
			<remark>Tente mudar o filtro da consulta</remark>
		</message>

		<error-message error="uiState.error"></error-message>
		<ion-infinite-scroll immediate-check="false" ng-if="!uiState.error && !vm.isRefreshing && vm.hasMoreNews" on-infinite="vm.doPaginate()"
			distance="5%">
		</ion-infinite-scroll>
	</ion-content>
</ion-view>