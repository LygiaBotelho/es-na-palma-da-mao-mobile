<ion-view title="Consulta SEP">

	<div class="bar bar-subheader state-sep-subheader">
		<md-input-container md-no-float class="md-block md-whiteframe-2dp">
			<input class="input-search" ng-model="vm.processNumber" type="tel" placeholder="Número do Processo">
			<md-icon style="display:inline-block;" ng-click="vm.getProcess(vm.processNumber)"><i class="fa fa-search" aria-hidden="true"></i></md-icon>
		</md-input-container>
	</div>

	<div class="spinner-container" ng-if="uiState.loading">
		<ion-spinner icon="android"></ion-spinner>
	</div>

	<ion-content id="state-sep-consulta" class="has-subheader" scroll-watch scroll-class="fix-top" class-target=".state-sep-subheader"
		offset="25">
		<md-list id="device-information-content" class="fade-in" ng-if="vm.hasProcess">
			<md-list-item class="row">
				<div class="col-50 title">
					<strong>Autuado em</strong>
				</div>
				<div class="col-50">
					{{::vm.firstUpdate.date | calendar}}
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item class="row">
				<div class="col-50 title">
					<strong>Assunto</strong>
				</div>
				<div class="col-50">
					{{::vm.process.subject}}
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item class="row">
				<div class="col-50 title">
					<strong>Partes</strong>
				</div>
				<div class="col-50">
					<span ng-repeat="part in vm.process.parts">{{::part}} </span>
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item>
				<div class="col-50 title">
					<strong>Município</strong>
				</div>
				<div class="col">
					{{::vm.process.district | capitalize}}
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item>
				<div class="col-50 title">
					<strong>Informações diversas</strong>
				</div>
				<div class="col">
					{{::vm.process.extra}}
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item>
				<div class="item-text-padding">
					<strong>Resumo</strong>
					<p>{{::vm.process.summary}}</p>
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item>
				<div class="col-50 title">
					<strong>Situação</strong>
				</div>
				<div class="col">
					{{::vm.process.status | capitalize}}
				</div>
			</md-list-item>
			<md-divider></md-divider>
			<md-list-item id="last-update">
				<div class="item-text-padding">
					<strong>Última Atualização</strong>
					<p>{{::vm.lastUpdate.date | calendar}}</p>
					<md-button class="md-secondary more-updates md-accent" ng-click="vm.toggleUpdates()">{{::vm.seeMoreUpdates}}</md-button>
				</div>
			</md-list-item>
			<md-list-item>
				<div>
					<p>{{::vm.lastUpdate.area | capitalize}}</p>
					<p>{{::vm.lastUpdate.agency | capitalize}}</p>
				</div>
			</md-list-item>
			<div class="espm-item-transition" ng-show="vm.showAllUpdates">
				<md-list-item ng-repeat="update in vm.hiddenUpdates">
					<div class="other-updates">
						<strong>{{::update.date | calendar}}</strong>
						<p md-colors="::{color: 'accent'}">{{::update.status | capitalize}}</p>
						<p>{{::update.area | capitalize}}</p>
						<p>{{::update.agency | capitalize}}</p>
					</div>
				</md-list-item>
			</div>
		</md-list>

		<message ng-if="!vm.searched" text="Sistema Eletrônico de Protocolo">
			<img src="components/sep/img/sep-logo.png">
			<remark>Digite o número do processo que deseja consultar no campo acima e clique na lupa</remark>
		</message>

		<error-message error="uiState.error">
			<remark ng-if="!uiState.error.handled">Não foi possível consultar o SEP</remark>
			<div ng-if="uiState.error.status === 404">
				<highlight>"{{::vm.lastProcessNumber}}"</highlight>
				<remark>Verifique o número informado</remark>
			</div>
		</error-message>
	</ion-content>
</ion-view>